podTemplate {
      node('kubepods') {
              stage('Build project') {
                      script {
                          sh "echo 'Start building resource'"
                          sh "./gradlew build"
                      }
               }
              stage('Build docker image') {
                      script {
                          dockerImage = docker.build "qanguyen/booking:v2.0.0"
                      }
              }
              stage('Push image') {
                      script {
                          // Assume the Docker Hub registry by passing an empty string as the first parameter
                          docker.withRegistry('' , 'dockerhub') {
                              dockerImage.push()
                          }
                      }
              }
              stage('Deploy kubernetes') {
                      script {
                          kubernetesDeploy(configs: "kubernetes", kubeconfigId: "")
                      }
              }
      }
}